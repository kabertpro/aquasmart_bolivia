<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaSmart Bolivia - Simulador de Recolectores Inteligentes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #1a5276;
            --secondary: #3498db;
            --accent: #2ecc71;
            --warning: #e74c3c;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --text: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.2rem 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo-icon {
            font-size: 2.5rem;
            color: var(--accent);
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
        }
        
        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
        }
        
        .logo p {
            font-size: 0.9rem;
            opacity: 0.9;
            margin: 0;
        }
        
        .live-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        
        .live-dot {
            width: 12px;
            height: 12px;
            background-color: var(--accent);
            border-radius: 50%;
        }
        
        /* Navigation */
        nav {
            background-color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-tabs {
            display: flex;
            list-style: none;
            gap: 10px;
        }
        
        .nav-tabs li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            padding: 10px 20px;
            border-radius: 6px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-tabs li a:hover, .nav-tabs li a.active {
            background-color: var(--primary);
            color: white;
        }
        
        .report-button {
            background: linear-gradient(135deg, var(--accent), #27ae60);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }
        
        .report-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Dashboard Styles */
        .dashboard {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        /* Region Selector */
        .region-selector {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            height: fit-content;
        }
        
        .region-selector h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .region-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .region-item {
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .region-item:hover {
            background-color: #f5f9ff;
        }
        
        .region-item.active {
            border-color: var(--secondary);
            background-color: #e3f2fd;
        }
        
        .region-name {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .region-details {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: #666;
        }
        
        .camera-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }
        
        .camera-btn:hover {
            background: var(--secondary);
            transform: translateY(-2px);
        }
        
        /* Simulation Panel */
        .simulation-panel {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }
        
        .visualization {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .panel-header h2 {
            color: var(--primary);
        }
        
        .system-status {
            display: flex;
            gap: 15px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            font-weight: 600;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        
        .status-online {
            background-color: var(--accent);
        }
        
        .status-offline {
            background-color: #95a5a6;
        }
        
        .status-warning {
            background-color: var(--warning);
        }
        
        .system-diagram {
            flex: 1;
            background: linear-gradient(135deg, #e3f2fd, #f0f8ff);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 400px;
        }
        
        .water-tank {
            width: 180px;
            height: 300px;
            border: 6px solid var(--primary);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            background-color: #e6f3ff;
        }
        
        .water-level {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(to top, #1a5276, #3498db);
            transition: height 1s ease;
        }
        
        .water-wave {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 10px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
        }
        
        .tank-label {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-weight: 600;
            color: var(--primary);
        }
        
        .sensor {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 0.7rem;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .sensor-level {
            top: 50px;
            right: -25px;
            background-color: var(--accent);
        }
        
        .sensor-flow {
            bottom: 80px;
            left: -25px;
            background-color: var(--secondary);
        }
        
        .sensor-quality {
            top: 150px;
            right: -25px;
            background-color: #9b59b6;
        }
        
        .controls {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
        }
        
        .control-group {
            margin-bottom: 1.5rem;
        }
        
        .control-group h3 {
            margin-bottom: 1rem;
            color: var(--primary);
            padding-bottom: 8px;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-row {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .control-label {
            width: 180px;
            font-weight: 500;
        }
        
        .slider-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .slider-container input {
            flex: 1;
        }
        
        .value-display {
            width: 70px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            background-color: #f0f7ff;
            padding: 5px 10px;
            border-radius: 4px;
        }
        
        .toggle-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .toggle {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--accent);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Statistics */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 0.5rem 0;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Data Log */
        .data-log {
            background-color: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            margin-top: 2rem;
        }
        
        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .log-entries {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
        }
        
        .log-entry {
            padding: 8px 10px;
            border-bottom: 1px solid #f5f5f5;
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-time {
            color: #666;
        }
        
        .log-message {
            flex: 1;
            margin: 0 15px;
        }
        
        .log-type-info {
            color: var(--secondary);
        }
        
        .log-type-warning {
            color: var(--warning);
        }
        
        .log-type-success {
            color: var(--accent);
        }
        
        /* Camera Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 20px;
            border-radius: 12px;
            width: 80%;
            max-width: 800px;
            position: relative;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 15px;
            top: 10px;
        }
        
        .close:hover {
            color: var(--warning);
        }
        
        .camera-view {
            width: 100%;
            height: 400px;
            background-color: #000;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            margin-top: 20px;
        }
        
        .camera-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .live-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--warning);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 5px;
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .camera-info {
            margin-top: 15px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .footer-logo span {
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .footer-info {
            text-align: right;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .simulation-panel {
                grid-template-columns: 1fr;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-container {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .region-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .camera-btn {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-tint"></i>
                </div>
                <div class="logo-text">
                    <h1>AquaSmart Bolivia</h1>
                    <p>Sistemas Inteligentes de Recolección de Agua</p>
                </div>
            </div>
            <div class="live-indicator">
                <div class="live-dot"></div>
                <span>SIMULACIÓN EN TIEMPO REAL</span>
            </div>
        </div>
    </header>
    
    <nav>
        <div class="container nav-container">
            <ul class="nav-tabs">
                <li><a href="#" class="nav-link active" data-tab="dashboard"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="#" class="nav-link" data-tab="regions"><i class="fas fa-map-marked-alt"></i> Regiones</a></li>
                <li><a href="#" class="nav-link" data-tab="statistics"><i class="fas fa-chart-line"></i> Estadísticas</a></li>
                <li><a href="#" class="nav-link" data-tab="configuration"><i class="fas fa-cogs"></i> Configuración</a></li>
                <li><a href="#" class="nav-link" data-tab="team"><i class="fas fa-users"></i> Equipo</a></li>
            </ul>
            <button class="report-button" id="generateReport">
                <i class="fas fa-file-pdf"></i> Generar Reporte
            </button>
        </div>
    </nav>
    
    <div class="container">
        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <h2>Dashboard Principal</h2>
            <p>Monitoreo en tiempo real de los sistemas de recolección de agua</p>
            
            <div class="dashboard">
                <div class="region-selector">
                    <h2><i class="fas fa-map-marker-alt"></i> Regiones de La Paz</h2>
                    <div class="region-list">
                        <div class="region-item active" data-region="altiplano">
                            <div>
                                <div class="region-name">Altiplano Norte</div>
                                <div class="region-details">
                                    <span>El Alto</span>
                                    <span>3800 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="001">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                        <div class="region-item" data-region="valle">
                            <div>
                                <div class="region-name">Valle de La Paz</div>
                                <div class="region-details">
                                    <span>Ciudad de La Paz</span>
                                    <span>3600 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="002">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                        <div class="region-item" data-region="yungas">
                            <div>
                                <div class="region-name">Yungas</div>
                                <div class="region-details">
                                    <span>Coroico</span>
                                    <span>1500 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="003">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                        <div class="region-item" data-region="lago">
                            <div>
                                <div class="region-name">Lago Titicaca</div>
                                <div class="region-details">
                                    <span>Copacabana</span>
                                    <span>3810 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="004">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                        <div class="region-item" data-region="sur">
                            <div>
                                <div class="region-name">Sur de La Paz</div>
                                <div class="region-details">
                                    <span>Viacha</span>
                                    <span>3850 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="005">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                        <div class="region-item" data-region="amazonia">
                            <div>
                                <div class="region-name">Amazonía Paceña</div>
                                <div class="region-details">
                                    <span>Rurrenabaque</span>
                                    <span>300 msnm</span>
                                </div>
                            </div>
                            <button class="camera-btn" data-camera="006">
                                <i class="fas fa-camera"></i> Ver Cámara
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="simulation-panel">
                    <div class="visualization">
                        <div class="panel-header">
                            <h2>Sistema de Recolección - <span id="current-region">Altiplano Norte</span></h2>
                            <div class="system-status">
                                <div class="status-indicator">
                                    <div class="status-dot status-online"></div>
                                    <span>En Línea</span>
                                </div>
                                <div class="status-indicator">
                                    <div class="status-dot status-warning"></div>
                                    <span>Lluvia Moderada</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="system-diagram">
                            <div class="water-tank">
                                <div class="water-level" id="waterLevel" style="height: 65%;">
                                    <div class="water-wave"></div>
                                </div>
                                <div class="sensor sensor-level">
                                    <i class="fas fa-ruler-vertical"></i>
                                </div>
                                <div class="sensor sensor-flow">
                                    <i class="fas fa-water"></i>
                                </div>
                                <div class="sensor sensor-quality">
                                    <i class="fas fa-vial"></i>
                                </div>
                                <div class="tank-label">TANQUE PRINCIPAL</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="controls">
                        <div class="control-group">
                            <h3><i class="fas fa-cloud-rain"></i> Condiciones Climáticas</h3>
                            
                            <div class="control-row">
                                <div class="control-label">Intensidad de Lluvia</div>
                                <div class="slider-container">
                                    <input type="range" id="rain-intensity" min="0" max="100" value="65">
                                    <div class="value-display" id="rain-intensity-value">65%</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Temperatura Ambiente</div>
                                <div class="slider-container">
                                    <input type="range" id="temperature" min="-5" max="35" value="12">
                                    <div class="value-display" id="temperature-value">12°C</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Humedad Relativa</div>
                                <div class="slider-container">
                                    <input type="range" id="humidity" min="0" max="100" value="45">
                                    <div class="value-display" id="humidity-value">45%</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h3><i class="fas fa-cog"></i> Configuración del Sistema</h3>
                            
                            <div class="control-row">
                                <div class="control-label">Capacidad del Tanque</div>
                                <div class="slider-container">
                                    <input type="range" id="tank-capacity" min="1000" max="10000" value="5000">
                                    <div class="value-display" id="tank-capacity-value">5000 L</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Área de Captación</div>
                                <div class="slider-container">
                                    <input type="range" id="captation-area" min="50" max="300" value="150">
                                    <div class="value-display" id="captation-area-value">150 m²</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Filtración Activa</div>
                                <div class="toggle-container">
                                    <label class="toggle">
                                        <input type="checkbox" id="filtration" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                    <span id="filtration-status">Activada</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <h3><i class="fas fa-chart-pie"></i> Distribución de Uso</h3>
                            
                            <div class="control-row">
                                <div class="control-label">Riego Agrícola</div>
                                <div class="slider-container">
                                    <input type="range" id="agricultural-use" min="0" max="100" value="40">
                                    <div class="value-display" id="agricultural-use-value">40%</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Uso Doméstico</div>
                                <div class="slider-container">
                                    <input type="range" id="domestic-use" min="0" max="100" value="35">
                                    <div class="value-display" id="domestic-use-value">35%</div>
                                </div>
                            </div>
                            
                            <div class="control-row">
                                <div class="control-label">Otros Usos</div>
                                <div class="slider-container">
                                    <input type="range" id="other-use" min="0" max="100" value="25">
                                    <div class="value-display" id="other-use-value">25%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="stats-container">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="stat-value" id="water-collected">3,250 L</div>
                    <div class="stat-label">Agua Recolectada (Hoy)</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div class="stat-value" id="water-saved">12,500 L</div>
                    <div class="stat-label">Agua Ahorrada (Mes)</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="stat-value" id="system-efficiency">78%</div>
                    <div class="stat-label">Eficiencia del Sistema</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-cloud"></i>
                    </div>
                    <div class="stat-value" id="rain-probability">65%</div>
                    <div class="stat-label">Probabilidad de Lluvia</div>
                </div>
            </div>
            
            <div class="data-log">
                <div class="log-header">
                    <h3><i class="fas fa-clipboard-list"></i> Registro del Sistema</h3>
                    <button class="report-button" id="clearLog">
                        <i class="fas fa-trash"></i> Limpiar Registro
                    </button>
                </div>
                <div class="log-entries" id="logEntries">
                    <!-- Las entradas del log se generarán dinámicamente -->
                </div>
            </div>
        </div>
        
        <!-- Otras pestañas (regions, statistics, configuration, team) se mantienen igual -->
        <div id="regions" class="tab-content">
            <h2>Regiones de Implementación</h2>
            <p>Información detallada de las regiones...</p>
        </div>
        
        <div id="statistics" class="tab-content">
            <h2>Estadísticas y Análisis</h2>
            <p>Datos históricos y tendencias...</p>
        </div>
        
        <div id="configuration" class="tab-content">
            <h2>Configuración del Sistema</h2>
            <p>Personalización de parámetros...</p>
        </div>
        
        <div id="team" class="tab-content">
            <h2>Nuestro Equipo</h2>
            <p>Conoce a los ingenieros especialistas...</p>
        </div>
    </div>
    
    <!-- Modal para Cámaras -->
    <div id="cameraModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle">Vista de Cámara - Altiplano Norte</h2>
            <div class="camera-view">
                <img id="cameraImage" src="" alt="Vista en vivo de la cámara" class="camera-image">
                <div class="live-badge">
                    <i class="fas fa-circle"></i> EN VIVO
                </div>
            </div>
            <div class="camera-info">
                <h4>Información del Sistema</h4>
                <p id="cameraLocation">Ubicación: El Alto, Altiplano Norte</p>
                <p id="cameraStatus">Estado del sistema: Operativo</p>
                <p id="cameraLastUpdate">Última actualización: <span id="updateTime">Hace 2 segundos</span></p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container footer-content">
            <div class="footer-logo">
                <span><i class="fas fa-tint"></i></span>
                <div>
                    <h3>AquaSmart Bolivia</h3>
                    <p>Tecnología para un futuro sostenible</p>
                </div>
            </div>
            <div class="footer-info">
                <p>Ingenieros a cargo: Pablo Barrientos, Jorge Narma, René Lopez</p>
                <p>Contacto: info@aquasmart.bo | +591 76543210</p>
            </div>
        </div>
    </footer>

    <script>
        // Datos de las regiones
        const regions = {
            altiplano: {
                name: "Altiplano Norte",
                location: "El Alto",
                altitude: "3800 msnm",
                climate: "Frío y seco",
                rainfall: "Baja a moderada",
                defaultRain: 65,
                defaultTemp: 12,
                defaultHumidity: 45,
                defaultTankCapacity: 5000,
                defaultArea: 150,
                camera: "001"
            },
            valle: {
                name: "Valle de La Paz",
                location: "Ciudad de La Paz",
                altitude: "3600 msnm",
                climate: "Templado",
                rainfall: "Moderada",
                defaultRain: 75,
                defaultTemp: 15,
                defaultHumidity: 60,
                defaultTankCapacity: 4500,
                defaultArea: 120,
                camera: "002"
            },
            yungas: {
                name: "Yungas",
                location: "Coroico",
                altitude: "1500 msnm",
                climate: "Cálido y húmedo",
                rainfall: "Alta",
                defaultRain: 85,
                defaultTemp: 22,
                defaultHumidity: 80,
                defaultTankCapacity: 6000,
                defaultArea: 180,
                camera: "003"
            },
            lago: {
                name: "Lago Titicaca",
                location: "Copacabana",
                altitude: "3810 msnm",
                climate: "Frío",
                rainfall: "Variable",
                defaultRain: 70,
                defaultTemp: 10,
                defaultHumidity: 65,
                defaultTankCapacity: 5500,
                defaultArea: 130,
                camera: "004"
            },
            sur: {
                name: "Sur de La Paz",
                location: "Viacha",
                altitude: "3850 msnm",
                climate: "Frío y ventoso",
                rainfall: "Baja",
                defaultRain: 55,
                defaultTemp: 11,
                defaultHumidity: 40,
                defaultTankCapacity: 4000,
                defaultArea: 110,
                camera: "005"
            },
            amazonia: {
                name: "Amazonía Paceña",
                location: "Rurrenabaque",
                altitude: "300 msnm",
                climate: "Tropical",
                rainfall: "Muy alta",
                defaultRain: 90,
                defaultTemp: 28,
                defaultHumidity: 85,
                defaultTankCapacity: 8000,
                defaultArea: 200,
                camera: "006"
            }
        };

        // Variables de simulación
        let currentRegion = 'altiplano';
        let simulationInterval;
        let logEntries = [];
        let cameraUpdateInterval;

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            initializeTabs();
            initializeRegionSelector();
            initializeControls();
            initializeCameraSystem();
            startSimulation();
            initializeLog();
            
            // Configurar el botón de generar reporte
            document.getElementById('generateReport').addEventListener('click', generatePDFReport);
            document.getElementById('clearLog').addEventListener('click', clearLog);
        });

        // Sistema de pestañas
        function initializeTabs() {
            const navLinks = document.querySelectorAll('.nav-link');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remover clase activa de todos los enlaces
                    navLinks.forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Agregar clase activa al enlace clickeado
                    this.classList.add('active');
                    
                    // Ocultar todo el contenido de pestañas
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Mostrar el contenido de la pestaña seleccionada
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Selector de regiones
        function initializeRegionSelector() {
            const regionItems = document.querySelectorAll('.region-item');
            
            regionItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remover clase activa de todos los elementos
                    regionItems.forEach(i => i.classList.remove('active'));
                    
                    // Agregar clase activa al elemento clickeado
                    this.classList.add('active');
                    
                    // Actualizar la región actual
                    currentRegion = this.getAttribute('data-region');
                    
                    // Actualizar la interfaz con los datos de la región
                    updateRegionData();
                    
                    // Agregar entrada al log
                    addLogEntry(`Sistema cambiado a región: ${regions[currentRegion].name}`, 'info');
                });
            });
        }

        // Sistema de cámaras
        function initializeCameraSystem() {
            const modal = document.getElementById('cameraModal');
            const closeBtn = document.querySelector('.close');
            const cameraBtns = document.querySelectorAll('.camera-btn');
            
            // Botones de cámara
            cameraBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const cameraId = this.getAttribute('data-camera');
                    openCameraModal(cameraId);
                });
            });
            
            // Cerrar modal
            closeBtn.addEventListener('click', function() {
                modal.style.display = 'none';
                clearInterval(cameraUpdateInterval);
            });
            
            // Cerrar modal al hacer clic fuera
            window.addEventListener('click', function(event) {
                if (event.target == modal) {
                    modal.style.display = 'none';
                    clearInterval(cameraUpdateInterval);
                }
            });
        }

        function openCameraModal(cameraId) {
            const modal = document.getElementById('cameraModal');
            const modalTitle = document.getElementById('modalTitle');
            const cameraImage = document.getElementById('cameraImage');
            const cameraLocation = document.getElementById('cameraLocation');
            const cameraStatus = document.getElementById('cameraStatus');
            
            // Encontrar la región correspondiente a la cámara
            let regionData;
            for (const regionKey in regions) {
                if (regions[regionKey].camera === cameraId) {
                    regionData = regions[regionKey];
                    break;
                }
            }
            
            if (regionData) {
                modalTitle.textContent = `Vista de Cámara - ${regionData.name}`;
                cameraLocation.textContent = `Ubicación: ${regionData.location}, ${regionData.name}`;
                cameraStatus.textContent = `Estado del sistema: Operativo`;
                
                // Cargar imagen de la cámara
                const imageUrl = `https://kabertpro.github.io/aquasmart_bolivia/camaras/${cameraId}.jpg`;
                cameraImage.src = imageUrl;
                
                // Simular actualización en vivo
                updateCameraTime();
                cameraUpdateInterval = setInterval(updateCameraTime, 2000);
                
                modal.style.display = 'block';
                
                addLogEntry(`Cámara activada: ${regionData.name}`, 'info');
            }
        }

        function updateCameraTime() {
            const updateTime = document.getElementById('updateTime');
            const now = new Date();
            updateTime.textContent = now.toLocaleTimeString();
        }

        // Actualizar datos de la región
        function updateRegionData() {
            const region = regions[currentRegion];
            
            // Actualizar el nombre de la región en el panel
            document.getElementById('current-region').textContent = region.name;
            
            // Actualizar los controles con los valores por defecto de la región
            document.getElementById('rain-intensity').value = region.defaultRain;
            document.getElementById('rain-intensity-value').textContent = region.defaultRain + '%';
            
            document.getElementById('temperature').value = region.defaultTemp;
            document.getElementById('temperature-value').textContent = region.defaultTemp + '°C';
            
            document.getElementById('humidity').value = region.defaultHumidity;
            document.getElementById('humidity-value').textContent = region.defaultHumidity + '%';
            
            document.getElementById('tank-capacity').value = region.defaultTankCapacity;
            document.getElementById('tank-capacity-value').textContent = region.defaultTankCapacity + ' L';
            
            document.getElementById('captation-area').value = region.defaultArea;
            document.getElementById('captation-area-value').textContent = region.defaultArea + ' m²';
            
            // Actualizar la simulación
            updateSimulation();
        }

        // Inicializar controles
        function initializeControls() {
            // Configurar eventos para los controles deslizantes
            const sliders = document.querySelectorAll('input[type="range"]');
            sliders.forEach(slider => {
                slider.addEventListener('input', function() {
                    const valueDisplay = document.getElementById(this.id + '-value');
                    let unit = '%';
                    
                    if (this.id === 'temperature') unit = '°C';
                    if (this.id === 'tank-capacity') unit = ' L';
                    if (this.id === 'captation-area') unit = ' m²';
                    
                    valueDisplay.textContent = this.value + unit;
                    updateSimulation();
                });
            });
            
            // Configurar eventos para los toggles
            const toggles = document.querySelectorAll('input[type="checkbox"]');
            toggles.forEach(toggle => {
                toggle.addEventListener('change', function() {
                    const statusElement = document.getElementById(this.id + '-status');
                    if (statusElement) {
                        statusElement.textContent = this.checked ? 'Activada' : 'Desactivada';
                    }
                    updateSimulation();
                });
            });
        }

        // Iniciar simulación en tiempo real
        function startSimulation() {
            // Actualizar la simulación cada 3 segundos
            simulationInterval = setInterval(updateSimulation, 3000);
        }

        // Actualizar simulación
        function updateSimulation() {
            // Obtener valores actuales de los controles
            const rainIntensity = parseInt(document.getElementById('rain-intensity').value);
            const temperature = parseInt(document.getElementById('temperature').value);
            const humidity = parseInt(document.getElementById('humidity').value);
            const tankCapacity = parseInt(document.getElementById('tank-capacity').value);
            const captationArea = parseInt(document.getElementById('captation-area').value);
            const agriculturalUse = parseInt(document.getElementById('agricultural-use').value);
            const domesticUse = parseInt(document.getElementById('domestic-use').value);
            const otherUse = parseInt(document.getElementById('other-use').value);
            const filtrationActive = document.getElementById('filtration').checked;
            
            // Calcular valores simulados (algoritmo simplificado)
            const waterCollected = Math.round((rainIntensity / 100) * captationArea * 0.8 * (humidity / 50));
            const waterSaved = waterCollected * 30; // Estimación mensual
            const systemEfficiency = Math.min(100, Math.round(70 + (rainIntensity / 5) + (filtrationActive ? 10 : 0)));
            const rainProbability = Math.min(100, Math.round(rainIntensity * 0.8 + (humidity / 2)));
            
            // Calcular nivel de agua en el tanque (porcentaje)
            const waterLevel = Math.min(100, Math.round((waterCollected / tankCapacity) * 100 * 10));
            
            // Actualizar visualización
            document.getElementById('waterLevel').style.height = waterLevel + '%';
            document.getElementById('water-collected').textContent = formatNumber(waterCollected) + ' L';
            document.getElementById('water-saved').textContent = formatNumber(waterSaved) + ' L';
            document.getElementById('system-efficiency').textContent = systemEfficiency + '%';
            document.getElementById('rain-probability').textContent = rainProbability + '%';
            
            // Actualizar estado del sistema
            updateSystemStatus(rainIntensity, waterLevel);
            
            // Agregar entrada aleatoria al log ocasionalmente
            if (Math.random() > 0.7) {
                addRandomLogEntry();
            }
        }

        // Actualizar estado del sistema
        function updateSystemStatus(rainIntensity, waterLevel) {
            const statusIndicator = document.querySelectorAll('.status-indicator')[1];
            
            if (rainIntensity > 70) {
                statusIndicator.innerHTML = '<div class="status-dot status-warning"></div><span>Lluvia Intensa</span>';
            } else if (rainIntensity > 40) {
                statusIndicator.innerHTML = '<div class="status-dot status-online"></div><span>Lluvia Moderada</span>';
            } else {
                statusIndicator.innerHTML = '<div class="status-dot status-offline"></div><span>Lluvia Ligera</span>';
            }
            
            // Advertencia si el tanque está casi lleno
            if (waterLevel > 90) {
                addLogEntry(`Advertencia: Tanque al ${waterLevel}% de capacidad`, 'warning');
            }
        }

        // Formatear números con separadores de miles
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        // Inicializar registro del sistema
        function initializeLog() {
            // Agregar algunas entradas iniciales
            addLogEntry('Sistema de recolección iniciado', 'success');
            addLogEntry('Conectando a sensores regionales...', 'info');
            addLogEntry('Conexión establecida con estación meteorológica', 'success');
            addLogEntry('Sensores de nivel de agua calibrados', 'info');
        }

        // Agregar entrada al registro
        function addLogEntry(message, type) {
            const logEntries = document.getElementById('logEntries');
            const timestamp = new Date().toLocaleTimeString();
            
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `
                <div class="log-time">${timestamp}</div>
                <div class="log-message log-type-${type}">${message}</div>
                <div class="log-type">${type.toUpperCase()}</div>
            `;
            
            logEntries.appendChild(entry);
            logEntries.scrollTop = logEntries.scrollHeight;
            
            // Guardar entrada para el reporte
            window.logEntries = window.logEntries || [];
            window.logEntries.push({timestamp, message, type});
        }

        // Agregar entrada aleatoria al registro
        function addRandomLogEntry() {
            const messages = [
                'Lectura de sensor de flujo actualizada',
                'Datos meteorológicos recibidos',
                'Sistema de filtración funcionando normalmente',
                'Nivel de pH del agua dentro de parámetros normales',
                'Bomba de distribución activada',
                'Válvula de desvío ajustada',
                'Calidad del agua: Óptima para uso agrícola',
                'Presión del sistema estable'
            ];
            
            const types = ['info', 'success'];
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            const randomType = types[Math.floor(Math.random() * types.length)];
            
            addLogEntry(randomMessage, randomType);
        }

        // Limpiar registro
        function clearLog() {
            document.getElementById('logEntries').innerHTML = '';
            window.logEntries = [];
            addLogEntry('Registro del sistema limpiado', 'info');
        }

        // Generar reporte PDF
        function generatePDFReport() {
            addLogEntry('Generando reporte del sistema...', 'info');
            
            // Usar html2canvas para capturar la visualización
            html2canvas(document.querySelector('.system-diagram')).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                
                // Crear PDF
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4');
                
                // Título del reporte
                doc.setFontSize(20);
                doc.setTextColor(26, 82, 118);
                doc.text('Reporte del Sistema de Recolección', 105, 20, { align: 'center' });
                
                // Información de la región
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Región: ${regions[currentRegion].name}`, 20, 40);
                doc.text(`Ubicación: ${regions[currentRegion].location}`, 20, 48);
                doc.text(`Altitud: ${regions[currentRegion].altitude}`, 20, 56);
                doc.text(`Clima: ${regions[currentRegion].climate}`, 20, 64);
                
                // Fecha y hora
                const now = new Date();
                doc.text(`Generado: ${now.toLocaleString()}`, 20, 72);
                
                // Imagen del sistema
                doc.addImage(imgData, 'PNG', 20, 85, 170, 80);
                
                // Estadísticas
                doc.setFontSize(16);
                doc.setTextColor(26, 82, 118);
                doc.text('Estadísticas del Sistema', 20, 180);
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Agua recolectada: ${document.getElementById('water-collected').textContent}`, 20, 192);
                doc.text(`Agua ahorrada: ${document.getElementById('water-saved').textContent}`, 20, 200);
                doc.text(`Eficiencia del sistema: ${document.getElementById('system-efficiency').textContent}`, 20, 208);
                doc.text(`Probabilidad de lluvia: ${document.getElementById('rain-probability').textContent}`, 20, 216);
                
                // Configuración actual
                doc.setFontSize(16);
                doc.setTextColor(26, 82, 118);
                doc.text('Configuración Actual', 20, 235);
                
                doc.setFontSize(12);
                doc.setTextColor(0, 0, 0);
                doc.text(`Intensidad de lluvia: ${document.getElementById('rain-intensity-value').textContent}`, 20, 247);
                doc.text(`Temperatura: ${document.getElementById('temperature-value').textContent}`, 20, 255);
                doc.text(`Humedad: ${document.getElementById('humidity-value').textContent}`, 20, 263);
                doc.text(`Capacidad del tanque: ${document.getElementById('tank-capacity-value').textContent}`, 20, 271);
                doc.text(`Área de captación: ${document.getElementById('captation-area-value').textContent}`, 20, 279);
                
                // Guardar PDF
                doc.save(`reporte_aquasmart_${currentRegion}_${now.getTime()}.pdf`);
                
                addLogEntry('Reporte PDF generado exitosamente', 'success');
            });
        }
    </script>
</body>
</html>
